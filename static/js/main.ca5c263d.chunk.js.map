{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","services/news-api.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","searchQuery","onInputChange","e","setState","target","value","toLowerCase","handleSubmit","preventDefault","trim","toast","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","name","url","onClick","src","alt","Button","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","image","largeImageURL","tags","createPortal","fetchImages","q","currentPage","fetch","then","res","json","data","hits","map","id","webformatURL","ImageGallery","images","activeIdx","status","showModal","fetchNewImages","query","length","error","scrollTo","top","documentElement","scrollHeight","behavior","catch","handleLoadMore","prevState","toggleModal","showImage","index","findIndex","prevProps","color","height","width","PureComponent","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ca5c263d.chunk.js","sourcesContent":["import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  onInputChange = e => {\n    this.setState({ searchQuery: e.target.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.searchQuery.trim() === '') {\n      return toast('Enter some image name');\n    }\n\n    this.props.onSubmit(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchQuery}\n            onChange={this.onInputChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\n\nfunction ImageGalleryItem({ name, url, onClick }) {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={url}\n        alt={name}\n        className=\"ImageGalleryItem-image\"\n        onClick={onClick}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  name: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL, tags } = this.props.image;\n\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt={tags} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  image: PropTypes.exact({\n    id: PropTypes.number,\n    webformatURL: PropTypes.string,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n  }),\n  onClose: PropTypes.func.isRequired,\n};\n","const baseUrl = 'https://pixabay.com/api/';\nconst APIkey = '19547883-c83eecf3fafc0cf8c7a25c2e3';\n\nexport function fetchImages(q, currentPage) {\n  return fetch(\n    `${baseUrl}?q=${q}&page=${currentPage}&key=${APIkey}&image_type=photo&orientation=horizontal&per_page=12`,\n  )\n    .then(res => res.json())\n    .then(data =>\n      data.hits.map(({ id, webformatURL, largeImageURL, tags }) => ({\n        id,\n        webformatURL,\n        largeImageURL,\n        tags,\n      })),\n    );\n}\n","import { PureComponent } from 'react';\nimport { toast } from 'react-toastify';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Loader from 'react-loader-spinner';\nimport Button from '../Button';\nimport Modal from '../Modal';\nimport { fetchImages } from '../../services/news-api';\nimport PropTypes from 'prop-types';\n\nexport default class ImageGallery extends PureComponent {\n  state = {\n    images: [],\n    currentPage: 1,\n    activeIdx: null,\n    status: 'idle',\n    showModal: false,\n  };\n\n  componentDidMount() {\n    this.fetchNewImages();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.query !== this.props.query) {\n      this.setState({\n        images: [],\n        currentPage: 1,\n        activeIdx: null,\n        status: 'idle',\n      });\n      this.fetchNewImages();\n    }\n\n    if (\n      prevProps.query === this.props.query &&\n      prevState.currentPage !== this.state.currentPage\n    ) {\n      this.setState({ status: 'pending' });\n      const { currentPage } = this.state;\n      const q = this.props.query;\n      fetchImages(q, currentPage)\n        .then(images =>\n          this.setState(prevState => ({\n            images: [...prevState.images, ...images],\n          })),\n        )\n        .then(() => {\n          this.setState({ status: 'resolved' });\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        })\n        .catch(() => this.setState({ status: 'rejected' }));\n    }\n    return;\n  }\n\n  fetchNewImages = () => {\n    this.setState({ status: 'pending' });\n    const { currentPage } = this.state;\n    const q = this.props.query;\n    fetchImages(q, currentPage)\n      .then(images => this.setState({ images }))\n      .then(() => {\n        if (this.state.images.length === 0) {\n          toast.error(`No such name exists`);\n          this.setState({ status: 'idle' });\n        } else {\n          this.setState({ status: 'resolved' });\n\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n      })\n      .catch(() => this.setState({ status: 'rejected' }));\n  };\n\n  handleLoadMore = () => {\n    this.setState(prevState => ({\n      currentPage: prevState.currentPage + 1,\n    }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n  showImage = e => {\n    const index = this.state.images.findIndex(\n      image => image.webformatURL === e.target.src,\n    );\n\n    this.setState({ activeIdx: index, showModal: true });\n  };\n\n  render() {\n    const { images, status, activeIdx, showModal } = this.state;\n\n    return (\n      <>\n        {status === 'rejected' && toast.error(`oops ... something went wrong`)}\n        {\n          <ul className=\"ImageGallery\">\n            {images.map(({ id, tags, webformatURL }) => (\n              <ImageGalleryItem\n                key={id}\n                name={tags}\n                url={webformatURL}\n                onClick={this.showImage}\n              />\n            ))}\n          </ul>\n        }\n        <div className=\"container\">\n          {status === 'pending' && (\n            <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\n          )}\n          {images.length > 0 && status === 'resolved' && (\n            <Button onClick={this.handleLoadMore} />\n          )}\n        </div>\n        {showModal && (\n          <Modal image={images[activeIdx]} onClose={this.toggleModal} />\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string.isRequired,\n};\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    query: '',\n  };\n\n  handleFormSubmit = query => {\n    this.setState({\n      query: query,\n    });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ToastContainer autoClose={3000} />\n        {query && <ImageGallery query={query} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}